function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function showMessages(e){const t=document.getElementById("messageList");t.innerHTML="",e.forEach(e=>{const n=document.createElement("li"),a=escapeHTML(e.name),r=escapeHTML(e.message);n.textContent=`${a}: ${r}`,t.appendChild(n)})}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("form");e&&e.addEventListener("submit",function(t){var n=document.getElementById("username").value.trim();if("TVS Dev Team"===n){t.preventDefault();var a=prompt("이 닉네임을 사용하려면 비밀번호를 입력하세요: ");if(null===a)return!1;if(""===a)return alert("비밀번호를 입력해야 합니다."),t.preventDefault(),!1;document.getElementById("admin_password").value=a;var r=new FormData(e);fetch("write",{method:"POST",body:r}).then(e=>e.text()).then(e=>{if(e.includes("password_error"))return alert("비밀번호가 맞지 않습니다."),t.preventDefault(),!1;window.location.href="/"})}})}),document.addEventListener("DOMContentLoaded",()=>{fetch("/api/messages").then(e=>e.json()).then(e=>{showMessages(e)})});